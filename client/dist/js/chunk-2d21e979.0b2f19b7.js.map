{"version":3,"sources":["webpack:///./src/views/ActivitiesTable.vue","webpack:///./src/views/ActivitiesTable.vue?090d"],"names":["document","title","data","reactive","activities","curActivity","id","catchDelete","filter","item","catchEdit","newAct","i","console","log","newCopy","key","push","sort","a","b","Date","startDatetime","Refresh","axios","get","then","resp","catch","err","length","addActivity","type","toggleModal","viewActivity","activity","onBeforeMount","loginId","router","__exports__"],"mappings":"kmCAwDAA,SAASC,MAAQ,mBAEjB,IAAIC,EAAOC,sBAAS,CAClBC,WAAY,GACZC,YAAa,CAAEC,GAAI,MAWrB,SAASC,EAAYD,GAEnBJ,EAAKE,WAAaF,EAAKE,WAAWI,QAAO,SAACC,GAAD,OAAUA,EAAKH,IAAMA,KAGhE,SAASI,EAAUC,GAEjB,GAAIT,EAAKG,YAAYC,IACnB,IAAK,IAAIM,KAAKV,EAAKE,WACjB,GAAIF,EAAKE,WAAWQ,GAAGN,IAAMK,EAAOL,GAAI,CACtCO,QAAQC,IAAI,eAAgBH,GAC5BT,EAAKE,WAAWQ,GAAKD,EACrB,WAGC,CACLE,QAAQC,IAAI,WAAYH,GACxB,IAAII,EAAU,GACd,IAAK,IAAIC,KAAOL,EACdI,EAAQC,GAAOL,EAAOK,GAExBd,EAAKE,WAAWa,KAAKF,GACrBb,EAAKE,WAAWc,MAAK,SAAUC,EAAGC,GAChC,OAAO,IAAIC,KAAKD,EAAEE,eAAiB,IAAID,KAAKF,EAAEG,kBAGlDT,QAAQC,IAAI,iCAAkCZ,EAAKE,YAGrD,SAASmB,IACPC,IACGC,IAAI,uBACJC,MAAK,SAACC,GAAS,uBACGA,EAAKzB,MADR,IACd,IAAK,EAAL,qBAA4B,KAAnBO,EAAmB,QAC1BP,EAAKE,WAAWa,KAAKR,IAFT,8BAIdP,EAAKE,WAAWc,MAAK,SAAUC,EAAGC,GAChC,OAAO,IAAIC,KAAKD,EAAEE,eAAiB,IAAID,KAAKF,EAAEG,qBAGjDM,OAAM,SAACC,GACNhB,QAAQC,IAAIe,GACZ3B,EAAKE,WAAW0B,OAAS,KAI/B,SAASC,IACP,IAAK,IAAIf,KAAOd,EAAKG,YACnBH,EAAKG,YAAYW,GAAO,KAE1Bd,EAAKG,YAAY2B,KAAO,WACxBnB,QAAQC,IAAI,gCAAiCZ,EAAKG,aAClD4B,eAAY,qBAGd,SAASC,EAAaC,GACpB,IAAK,IAAInB,KAAOmB,EACdjC,EAAKG,YAAYW,GAAOmB,EAASnB,GAGnCiB,eAAY,wB,OApEdG,4BAAc,WACPC,iBAILd,IAHEe,OAAOrB,KAAK,a,w3CC9DhB,MAAMsB,EAAc,EAEL","file":"js/chunk-2d21e979.0b2f19b7.js","sourcesContent":["<template>\r\n  <msi-navbar></msi-navbar>\r\n\r\n  <div class=\"container\">\r\n    <h4 class=\"my-4\">Ordered by StartDatetime Decreasing</h4>\r\n\r\n    <table class=\"table caption-top table-striped table-hover\">\r\n      <thead class=\"text-center\">\r\n        <tr>\r\n          <th scope=\"col\" style=\"width: 5%\">#</th>\r\n          <th scope=\"col\" style=\"width: 40%\">Title</th>\r\n          <th scope=\"col\" style=\"width: 20%\">Start</th>\r\n          <th scope=\"col\" style=\"width: 20%\">End</th>\r\n          <th scope=\"col\" style=\"width: 25%\">AffectedSystems</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr\r\n          v-for=\"(activity, ind) in data.activities\"\r\n          class=\"small\"\r\n          :key=\"activity.id\"\r\n          @click=\"viewActivity(activity)\"\r\n        >\r\n          <td>{{ ind + 1 }}</td>\r\n          <td>{{ activity.title }}</td>\r\n          <td>{{ new Date(activity.startDatetime).toLocaleString() }}</td>\r\n          <td>{{ new Date(activity.endDatetime).toLocaleString() }}</td>\r\n          <td v-html=\"activity.affectedSystems\"></td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n\r\n    <hr class=\"border-1 my-3\" />\r\n    <div class=\"text-center\">\r\n      <button class=\"btn btn-primary\" @click=\"addActivity()\">Add</button>\r\n    </div>\r\n  </div>\r\n\r\n  <activity-details\r\n    :activity=\"data.curActivity\"\r\n    @delete=\"(id) => catchDelete(id)\"\r\n    @edit=\"(newAct) => catchEdit(newAct)\"\r\n  ></activity-details>\r\n</template>\r\n\r\n<script setup>\r\nimport axios from \"axios\";\r\nimport { reactive, onBeforeMount } from \"vue\";\r\n\r\nimport msiNavbar from \"../components/MsiNavbar.vue\";\r\nimport activityDetails from \"../components/ActivityDetails.vue\";\r\n\r\nimport { loginId } from \"../common/msiLogin\";\r\nimport toggleModal from \"../common/modal\";\r\nimport router from \"../router\";\r\n\r\ndocument.title = \"Activities Table\";\r\n\r\nlet data = reactive({\r\n  activities: [],\r\n  curActivity: { id: \"\" },\r\n});\r\n\r\nonBeforeMount(() => {\r\n  if (!loginId()) {\r\n    router.push(\"/login\");\r\n    return;\r\n  }\r\n  Refresh();\r\n});\r\n\r\nfunction catchDelete(id) {\r\n  // console.log('catchDelete', id)\r\n  data.activities = data.activities.filter((item) => item.id != id);\r\n}\r\n\r\nfunction catchEdit(newAct) {\r\n  // console.log('catchEdit', newAct)\r\n  if (data.curActivity.id) {\r\n    for (let i in data.activities) {\r\n      if (data.activities[i].id == newAct.id) {\r\n        console.log(\"changed act:\", newAct);\r\n        data.activities[i] = newAct;\r\n        break;\r\n      }\r\n    }\r\n  } else {\r\n    console.log(\"add act:\", newAct);\r\n    let newCopy = {};\r\n    for (let key in newAct) {\r\n      newCopy[key] = newAct[key];\r\n    }\r\n    data.activities.push(newCopy);\r\n    data.activities.sort(function (a, b) {\r\n      return new Date(b.startDatetime) - new Date(a.startDatetime);\r\n    });\r\n  }\r\n  console.log(\"log catchEdit data.activities:\", data.activities);\r\n}\r\n\r\nfunction Refresh() {\r\n  axios\r\n    .get(\"/api/msi/activities\")\r\n    .then((resp) => {\r\n      for (let item of resp.data) {\r\n        data.activities.push(item);\r\n      }\r\n      data.activities.sort(function (a, b) {\r\n        return new Date(b.startDatetime) - new Date(a.startDatetime);\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n      data.activities.length = 0;\r\n    });\r\n}\r\n\r\nfunction addActivity() {\r\n  for (let key in data.curActivity) {\r\n    data.curActivity[key] = null;\r\n  }\r\n  data.curActivity.type = \"Activity\";\r\n  console.log(\"actTable -- data.curActivity:\", data.curActivity);\r\n  toggleModal(\"editActivityModal\");\r\n}\r\n\r\nfunction viewActivity(activity) {\r\n  for (let key in activity) {\r\n    data.curActivity[key] = activity[key];\r\n  }\r\n  // console.log('in activitytable', data.curActivity)\r\n  toggleModal(\"activityDetailsModal\");\r\n}\r\n</script>\r\n","import script from \"./ActivitiesTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ActivitiesTable.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"sourceRoot":""}