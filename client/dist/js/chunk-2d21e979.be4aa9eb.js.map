{"version":3,"sources":["webpack:///./src/views/ActivitiesTable.vue","webpack:///./src/views/ActivitiesTable.vue?090d"],"names":["document","title","data","activities","curActivity","catchDelete","id","filter","item","catchEdit","newAct","i","length","push","sort","a","b","Date","startDatetime","Refresh","get","then","resp","catch","err","console","log","addActivity","key","viewActivity","activity","router"],"mappings":"k7BAwDAA,SAASC,MAAQ,mBAEjB,IAAIC,EAAO,eAAS,CAClBC,WAAY,GACZC,YAAa,KAWf,SAASC,EAAYC,GAEnBJ,EAAKC,WAAaD,EAAKC,WAAWI,QAAO,SAAAC,GAAI,OAAIA,EAAKF,IAAMA,KAG9D,SAASG,EAAUC,GACjB,GAAIR,EAAKE,YAAYE,IACnB,IAAK,IAAIK,KAAKT,EAAKC,WAAWS,OAC5B,GAAIV,EAAKC,WAAWQ,GAAGL,IAAMI,EAAOJ,GAAI,CACtCJ,EAAKC,WAAWQ,GAAKD,EAC3B,YAKER,EAAKC,WAAWU,KAAKH,GACrBR,EAAKC,WAAWW,MAAK,SAAUC,EAAGC,GAChC,OAAO,IAAIC,KAAKD,EAAEE,eAAiB,IAAID,KAAKF,EAAEG,kBAKpD,SAASC,IACP,EAAAJ,EACGK,IAAI,uBACJC,MAAK,SAACC,GAAS,uBACGA,EAAKpB,MADR,IACd,2BAA4B,KAAnBM,EAAmB,QAC1BN,EAAKC,WAAWU,KAAKL,IAFT,8BAIdN,EAAKC,WAAWW,MAAK,SAAUC,EAAGC,GAChC,OAAO,IAAIC,KAAKD,EAAEE,eAAiB,IAAID,KAAKF,EAAEG,qBAGjDK,OAAM,SAACC,GACNC,QAAQC,IAAIF,GACZtB,EAAKC,WAAWS,OAAS,KAI/B,SAASe,IACP,IAAK,IAAIC,KAAO1B,EAAKE,YACnBF,EAAKE,YAAYwB,GAAO,KAE1B,eAAY,2BAGd,SAASC,EAAaC,GACpB,IAAK,IAAIF,KAAOE,EACd5B,EAAKE,YAAYwB,GAAOE,EAASF,GAEnC,eAAY,wB,OA1Dd,gBAAc,WACP,iBAILT,IAHEY,EAAA,KAAOlB,KAAK,a,whCC9DD","file":"js/chunk-2d21e979.be4aa9eb.js","sourcesContent":["<template>\r\n  <msi-navbar></msi-navbar>\r\n\r\n  <div class=\"container\">\r\n    <h4 class=\"my-4\">Ordered by StartDatetime Decreasing</h4>\r\n\r\n    <table class=\"table caption-top table-striped table-hover\">\r\n      <thead class=\"text-center\">\r\n        <tr>\r\n          <th scope=\"col\" style=\"width: 5%\">#</th>\r\n          <th scope=\"col\" style=\"width: 40%\">Title</th>\r\n          <th scope=\"col\" style=\"width: 20%\">Start</th>\r\n          <th scope=\"col\" style=\"width: 20%\">End</th>\r\n          <th scope=\"col\" style=\"width: 25%\">AffectedSystems</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr\r\n          v-for=\"(activity, ind) in data.activities\"\r\n          class=\"small\"\r\n          :key=\"activity.id\"\r\n          @click=\"viewActivity(activity)\"\r\n        >\r\n          <td>{{ ind + 1 }}</td>\r\n          <td>{{ activity.title }}</td>\r\n          <td>{{ new Date(activity.startDatetime).toLocaleString() }}</td>\r\n          <td>{{ new Date(activity.endDatetime).toLocaleString() }}</td>\r\n          <td v-html=\"activity.affectedSystems\"></td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n\r\n    <hr class=\"border-1 my-3\" />\r\n    <div class=\"text-center\">\r\n      <button class=\"btn btn-primary\" @click=\"addActivity()\">Add</button>\r\n    </div>\r\n  </div>\r\n\r\n  <activity-details\r\n    :activity=\"data.curActivity\"\r\n    @delete=\"(id) => catchDelete(id)\"\r\n    @edit=\"(newAct) => catchEdit(newAct)\"\r\n  ></activity-details>\r\n</template>\r\n\r\n<script setup>\r\nimport axios from \"axios\";\r\nimport { reactive, onBeforeMount } from \"vue\";\r\n\r\nimport msiNavbar from \"../components/MsiNavbar.vue\";\r\nimport activityDetails from \"../components/ActivityDetails.vue\";\r\n\r\nimport { loginId } from \"../common/msiLogin\";\r\nimport toggleModal from \"../common/modal\";\r\nimport router from \"../router\";\r\n\r\ndocument.title = \"Activities Table\";\r\n\r\nlet data = reactive({\r\n  activities: [],\r\n  curActivity: {},\r\n});\r\n\r\nonBeforeMount(() => {\r\n  if (!loginId()) {\r\n    router.push(\"/login\");\r\n    return\r\n  }\r\n  Refresh();\r\n})\r\n\r\nfunction catchDelete(id) {\r\n  // console.log('catchDelete', id)\r\n  data.activities = data.activities.filter(item => item.id != id)\r\n}\r\n\r\nfunction catchEdit(newAct) {\r\n  if (data.curActivity.id) {\r\n    for (let i in data.activities.length) {\r\n      if (data.activities[i].id == newAct.id) {\r\n        data.activities[i] = newAct\r\n\t\tbreak;\r\n      }\r\n    }\r\n  }\r\n  else {\r\n    data.activities.push(newAct)\r\n    data.activities.sort(function (a, b) {\r\n      return new Date(b.startDatetime) - new Date(a.startDatetime);\r\n    });\r\n  }\r\n}\r\n\r\nfunction Refresh() {\r\n  axios\r\n    .get(\"/api/msi/activities\")\r\n    .then((resp) => {\r\n      for (let item of resp.data) {\r\n        data.activities.push(item);\r\n      }\r\n      data.activities.sort(function (a, b) {\r\n        return new Date(b.startDatetime) - new Date(a.startDatetime);\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n      data.activities.length = 0;\r\n    });\r\n}\r\n\r\nfunction addActivity() {\r\n  for (let key in data.curActivity) {\r\n    data.curActivity[key] = null;\r\n  }\r\n  toggleModal('editActivityModalToggle')\r\n}\r\n\r\nfunction viewActivity(activity) {\r\n  for (let key in activity) {\r\n    data.curActivity[key] = activity[key]\r\n  }\r\n  toggleModal('activityDetailsModal');\r\n}\r\n</script>\r\n","import script from \"./ActivitiesTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ActivitiesTable.vue?vue&type=script&setup=true&lang=js\"\n\nexport default script"],"sourceRoot":""}