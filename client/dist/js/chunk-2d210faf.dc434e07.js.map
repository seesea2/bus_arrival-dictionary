{"version":3,"sources":["webpack:///./src/views/Activities.vue","webpack:///./src/views/Activities.vue?b026"],"names":["document","title","data","activities","curActivity","catchDelete","id","filter","item","catchEdit","newAct","i","push","sort","a","b","Date","startDatetime","Refresh","get","then","resp","catch","err","console","log","length","addActivity","key","viewActivity","activity","router"],"mappings":"8zBAwDAA,SAASC,MAAQ,aAEjB,IAAIC,EAAO,eAAS,CAClBC,WAAY,GACZC,YAAa,KAWf,SAASC,EAAYC,GAEnBJ,EAAKC,WAAaD,EAAKC,WAAWI,QAAO,SAAAC,GAAI,OAAIA,EAAKF,IAAMA,KAG9D,SAASG,EAAUC,GACjB,GAAIR,EAAKE,YAAYE,IACnB,IAAK,IAAIK,KAAKT,EAAKC,WACjB,GAAID,EAAKC,WAAWQ,GAAGL,IAAMI,EAAOJ,GAAI,CACtCJ,EAAKC,WAAWQ,GAAKD,EACrB,YAKJR,EAAKC,WAAWS,KAAKF,GACrBR,EAAKC,WAAWU,MAAK,SAAUC,EAAGC,GAChC,OAAO,IAAIC,KAAKD,EAAEE,eAAiB,IAAID,KAAKF,EAAEG,kBAKpD,SAASC,IACP,EAAAJ,EACGK,IAAI,uBACJC,MAAK,SAACC,GAAS,uBACGA,EAAKnB,MADR,IACd,2BAA4B,KAAnBM,EAAmB,QAC1BN,EAAKC,WAAWS,KAAKJ,IAFT,8BAIdN,EAAKC,WAAWU,MAAK,SAAUC,EAAGC,GAChC,OAAO,IAAIC,KAAKD,EAAEE,eAAiB,IAAID,KAAKF,EAAEG,qBAGjDK,OAAM,SAACC,GACNC,QAAQC,IAAIF,GACZrB,EAAKC,WAAWuB,OAAS,KAI/B,SAASC,IACP,IAAK,IAAIC,KAAO1B,EAAKE,YACnBF,EAAKE,YAAYwB,GAAO,KAE1B,eAAY,2BAGd,SAASC,EAAaC,GACpB,IAAK,IAAIF,KAAOE,EACd5B,EAAKE,YAAYwB,GAAOE,EAASF,GAEnC,eAAY,wB,OA1Dd,gBAAc,WACP,iBAILV,IAHEa,EAAA,KAAOnB,KAAK,a,uwCC9DD","file":"js/chunk-2d210faf.dc434e07.js","sourcesContent":["<template>\r\n  <msi-navbar></msi-navbar>\r\n\r\n  <div class=\"container\">\r\n    <h4 class=\"my-4\">Ordered by StartDatetime Decreasing</h4>\r\n    <div v-if=\"data.activities.length\" class=\"row\">\r\n      <div v-for=\"activity in data.activities\" class=\"col-sm-12 col-md-3 my-1\" :key=\"activity.id\">\r\n        <div class=\"card\" role=\"button\" @click=\"viewActivity(activity)\">\r\n          <div class=\"card-header\">{{ activity.title }}</div>\r\n          <div class=\"card-body\">\r\n            <!-- <div class=\"card-title fw-bold\">{{ activity.title }}</div> -->\r\n            <div class=\"card-text small\">\r\n              <b>Start:</b>\r\n              {{ new Date(activity.startDatetime).toLocaleString() }}\r\n            </div>\r\n            <div class=\"card-text small\">\r\n              <b>End:</b>\r\n              {{ new Date(activity.endDatetime).toLocaleString() }}\r\n            </div>\r\n            <div class=\"card-text small\">\r\n              <b>Affected Systems:</b>\r\n              {{ activity.affectedSystems }}\r\n            </div>\r\n            <div class=\"card-text small\">\r\n              <b>Contact Persons:</b>\r\n              {{ activity.contactPersons }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <hr class=\"border-1 my-3\" />\r\n    <div class=\"text-center\">\r\n      <button class=\"btn btn-primary\" @click=\"addActivity()\">Add</button>\r\n    </div>\r\n  </div>\r\n\r\n  <activity-details\r\n    :activity=\"data.curActivity\"\r\n    @delete=\"(id) => catchDelete(id)\"\r\n    @edit=\"(newAct) => catchEdit(newAct)\"\r\n  ></activity-details>\r\n</template>\r\n\r\n<script setup>\r\nimport axios from \"axios\";\r\nimport { reactive, onBeforeMount } from \"vue\"\r\n\r\nimport msiNavbar from \"../components/MsiNavbar.vue\";\r\nimport activityDetails from \"../components/ActivityDetails.vue\";\r\n\r\nimport { loginId } from \"../common/msiLogin\";\r\nimport toggleModal from \"../common/modal\";\r\nimport router from \"../router\";\r\n\r\ndocument.title = \"Activities\";\r\n\r\nlet data = reactive({\r\n  activities: [],\r\n  curActivity: {},\r\n});\r\n\r\nonBeforeMount(() => {\r\n  if (!loginId()) {\r\n    router.push(\"/login\");\r\n    return\r\n  }\r\n  Refresh();\r\n})\r\n\r\nfunction catchDelete(id) {\r\n  // console.log('catchDelete', id)\r\n  data.activities = data.activities.filter(item => item.id != id)\r\n}\r\n\r\nfunction catchEdit(newAct) {\r\n  if (data.curActivity.id) {\r\n    for (let i in data.activities) {\r\n      if (data.activities[i].id == newAct.id) {\r\n        data.activities[i] = newAct\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  else {\r\n    data.activities.push(newAct)\r\n    data.activities.sort(function (a, b) {\r\n      return new Date(b.startDatetime) - new Date(a.startDatetime);\r\n    });\r\n  }\r\n}\r\n\r\nfunction Refresh() {\r\n  axios\r\n    .get(\"/api/msi/activities\")\r\n    .then((resp) => {\r\n      for (let item of resp.data) {\r\n        data.activities.push(item);\r\n      }\r\n      data.activities.sort(function (a, b) {\r\n        return new Date(b.startDatetime) - new Date(a.startDatetime);\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n      data.activities.length = 0;\r\n    });\r\n}\r\n\r\nfunction addActivity() {\r\n  for (let key in data.curActivity) {\r\n    data.curActivity[key] = null;\r\n  }\r\n  toggleModal('editActivityModalToggle')\r\n}\r\n\r\nfunction viewActivity(activity) {\r\n  for (let key in activity) {\r\n    data.curActivity[key] = activity[key]\r\n  }\r\n  toggleModal('activityDetailsModal');\r\n}\r\n</script>\r\n","import script from \"./Activities.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Activities.vue?vue&type=script&setup=true&lang=js\"\n\nexport default script"],"sourceRoot":""}