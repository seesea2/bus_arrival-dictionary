{"version":3,"sources":["webpack:///./src/common/busBookmarks.js","webpack:///./src/components/Navbar.vue?95d0","webpack:///./src/components/Navbar.vue","webpack:///./src/components/Navbar.vue?bf71","webpack:///./src/views/BusArrival.vue","webpack:///./src/views/BusArrival.vue?a80f"],"names":["add","busStop","get","BusStopCode","bookmarks","getAll","push","localStorage","setItem","JSON","stringify","err","console","log","busStopCode","find","item","storageStr","getItem","parse","remove","filter","id","class","_createElementBlock","_createVNode","_component_router_link","to","script","__exports__","render","document","title","data","reactive","inputCode","inputNote","loadingNearbyBusStops","showNearbyBusStops","nearbyBusStops","getNearbyNote","watchId","bookmarkBusStops","getBusArrival","trim","navigator","geolocation","clearWatch","router","name","params","refreshBookmarks","removeBookmark","toggleNearbyBusStops","watchPosition","pos","coords","axios","latitude","longitude","then","resp","catch","error","code","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","onBeforeMount"],"mappings":"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","file":"js/chunk-31344f8c.1a4dd7f4.js","sourcesContent":["function add(busStop) {\r\n  try {\r\n    if (get(busStop.BusStopCode)) {\r\n      return false;\r\n    }\r\n\r\n    let bookmarks = getAll();\r\n    bookmarks.push(busStop);\r\n    localStorage.setItem(\"busStopBookmarks\", JSON.stringify(bookmarks));\r\n    // console.log(\"add true\");\r\n    return true;\r\n  } catch (err) {\r\n    // console.log(\"add false\");\r\n    console.log(err);\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction get(busStopCode) {\r\n  try {\r\n    let bookmarks = getAll();\r\n    return bookmarks.find((item) => item.BusStopCode === busStopCode);\r\n  } catch {\r\n    return;\r\n  }\r\n}\r\n\r\nfunction getAll() {\r\n  try {\r\n    const storageStr = localStorage.getItem(\"busStopBookmarks\");\r\n    let bookmarks = [];\r\n    if (storageStr) {\r\n      bookmarks = JSON.parse(storageStr);\r\n    }\r\n    return bookmarks;\r\n  } catch {\r\n    return [];\r\n  }\r\n}\r\n\r\nfunction remove(busStopCode) {\r\n  try {\r\n    let bookmarks = getAll();\r\n    bookmarks = bookmarks.filter((item) => item.BusStopCode !== busStopCode);\r\n    localStorage.setItem(\"busStopBookmarks\", JSON.stringify(bookmarks));\r\n    return true;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\nexport { add, get, getAll, remove };\r\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Navbar.vue?vue&type=style&index=0&id=23468830&scoped=true&lang=css\"","<template>\r\n  <div id=\"nav\" class=\"p-3\">\r\n    <router-link to=\"/\">BusArrival</router-link>&#9775;\r\n    <router-link to=\"/podcast\">Podcast</router-link>&#9775;\r\n    <router-link to=\"/learn\">LearnWords</router-link>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n#nav a {\r\n  font-weight: bold;\r\n  color: #2c3e50;\r\n}\r\n\r\n#nav a.router-link-active {\r\n  color: #42b983;\r\n}\r\n</style>\r\n","import { render } from \"./Navbar.vue?vue&type=template&id=23468830&scoped=true\"\nconst script = {}\n\nimport \"./Navbar.vue?vue&type=style&index=0&id=23468830&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\liyc\\\\workspace\\\\projects\\\\nodejs\\\\hican_top\\\\client\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-23468830\"]])\n\nexport default __exports__","<template>\r\n  <NavbarVue></NavbarVue>\r\n\r\n  <div class=\"container py-3\">\r\n    <div class=\"text-center\">\r\n      <h2>Bus Arrival Time</h2>\r\n      <h6>Get bus arrival time by bus stop code.</h6>\r\n      <div class=\"row justify-content-center mx-0 mt-4\">\r\n        <div class=\"col-12 col-md-6 col-lg-4\">\r\n          <div class=\"input-group\">\r\n            <input v-model.trim=\"data.inputCode\" placeholder=\"Bus stop code\" class=\"form-control\"\r\n              v-on:keyup.enter=\"getBusArrival()\" />\r\n            <div class=\"input-group-append\">\r\n              <button class=\"btn btn-primary\" @click=\"getBusArrival()\">\r\n                Get\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div v-if=\"data.inputNote\">{{ data.inputNote }}</div>\r\n        </div>\r\n      </div>\r\n\r\n      <div v-if=\"data.bookmarkBusStops && data.bookmarkBusStops.length\" class=\"mt-4\">\r\n        <h3>Bus Stop Bookmark</h3>\r\n        <table class=\"table table-sm mt-2\">\r\n          <thead class=\"thead-dark\">\r\n            <tr>\r\n              <th scope=\"col\">BusStop</th>\r\n              <th scope=\"col\">Name</th>\r\n              <th scope=\"col\">Remove</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"bookmark in data.bookmarkBusStops\" :key=\"bookmark.BusStopCode\">\r\n              <td>\r\n                <a @click=\"getBusArrival(bookmark.BusStopCode)\" class=\"btn\">{{\r\n                    bookmark.BusStopCode\r\n                }}</a>\r\n              </td>\r\n              <td>\r\n                <a @click=\"getBusArrival(bookmark.BusStopCode)\" class=\"btn\">{{ bookmark.Description }}@{{\r\n                    bookmark.RoadName\r\n                }}</a>\r\n              </td>\r\n              <td>\r\n                <a @click=\"removeBookmark(bookmark.BusStopCode)\" class=\"btn\">X</a>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      <div class=\"mt-4\">\r\n        <button @click=\"toggleNearbyBusStops()\" class=\"btn btn-primary\">\r\n          Toggle Nearby Bus Stops\r\n          <span v-if=\"data.loadingNearbyBusStops\" class=\"spinner-border spinner-border-sm\" role=\"status\"\r\n            aria-hidden=\"true\">\r\n            <span class=\"visually-hidden\">Loading...</span>\r\n          </span>\r\n        </button>\r\n        <div>{{ data.getNearbyNote }}</div>\r\n      </div>\r\n      <table v-if=\"data.showNearbyBusStops\" class=\"table table-sm mt-2\">\r\n        <thead class=\"thead-dark\">\r\n          <tr>\r\n            <th scope=\"col\">BusStop</th>\r\n            <th scope=\"col\">Name</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"nearbyBusStop in data.nearbyBusStops\" :key=\"nearbyBusStop.busStop.BusStopCode\">\r\n            <td>\r\n              <a @click=\"getBusArrival(nearbyBusStop.busStop.BusStopCode)\" class=\"btn\">{{\r\n                  nearbyBusStop.busStop.BusStopCode\r\n              }}</a>\r\n            </td>\r\n            <td>\r\n              <a @click=\"getBusArrival(nearbyBusStop.busStop.BusStopCode)\" class=\"btn\">\r\n                {{ nearbyBusStop.busStop.Description }}@{{\r\n                    nearbyBusStop.busStop.RoadName\r\n                }}\r\n              </a>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport axios from \"axios\";\r\nimport { onBeforeMount } from \"vue\";\r\n\r\nimport NavbarVue from \"../components/Navbar.vue\";\r\nimport { getAll, remove } from \"../common/busBookmarks\";\r\nimport router from \"../router\";\r\nimport { reactive } from \"vue\";\r\n\r\ndocument.title = \"Bus Arrival\";\r\n\r\nlet data = reactive({\r\n  inputCode: null,\r\n  inputNote: null,\r\n  loadingNearbyBusStops: false,\r\n  showNearbyBusStops: false,\r\n  nearbyBusStops: null,\r\n  getNearbyNote: null,\r\n  watchId: null,\r\n  bookmarkBusStops: null,\r\n});\r\n\r\nonBeforeMount(() => {\r\n  refreshBookmarks();\r\n});\r\n\r\nfunction getBusArrival(inputCode) {\r\n  if (inputCode) {\r\n    data.inputCode = inputCode;\r\n  }\r\n  if (!data.inputCode || !data.inputCode.trim()) {\r\n    data.inputNote = \"Please input bus stop code.\";\r\n    return;\r\n  }\r\n\r\n  data.inputNote = null;\r\n  data.showNearbyBusStops = false;\r\n  if (data.watchId) {\r\n    navigator.geolocation.clearWatch(data.watchId);\r\n    data.watchId = null;\r\n  }\r\n  router.push({\r\n    name: \"BusArrivalTime\",\r\n    params: { inputCode: data.inputCode.trim() },\r\n  });\r\n}\r\n\r\nfunction refreshBookmarks() {\r\n  data.bookmarkBusStops = getAll();\r\n}\r\n\r\nfunction removeBookmark(busStopCode) {\r\n  if (remove(busStopCode)) {\r\n    data.refreshBookmarks();\r\n  }\r\n}\r\n\r\nfunction toggleNearbyBusStops() {\r\n  if (data.showNearbyBusStops) {\r\n    data.showNearbyBusStops = false;\r\n    if (data.watchId) {\r\n      navigator.geolocation.clearWatch(data.watchId);\r\n      data.watchId = null;\r\n    }\r\n    return;\r\n  }\r\n\r\n  data.loadingNearbyBusStops = true;\r\n  if (navigator && navigator.geolocation) {\r\n    // navigator.geolocation.getCurrentPosition(\r\n    data.watchId = navigator.geolocation.watchPosition(\r\n      (pos) => {\r\n        if (pos && pos.coords) {\r\n          // console.log(pos.coords);\r\n          axios\r\n            .get(\"/api/lta/bus/nearbyBusStops\", {\r\n              params: {\r\n                latitude: pos.coords.latitude,\r\n                longitude: pos.coords.longitude,\r\n              },\r\n            })\r\n            .then((resp) => {\r\n              // console.log(\"resp.data\", resp.data);\r\n              data.nearbyBusStops = resp.data;\r\n              data.showNearbyBusStops = true;\r\n            })\r\n            .catch((err) => {\r\n              console.log(err);\r\n            })\r\n            .then((data.loadingNearbyBusStops = false));\r\n        }\r\n      },\r\n      (error) => {\r\n        data.loadingNearbyBusStops = false;\r\n        data.showNearbyBusStops = false;\r\n        if (data.watchId) {\r\n          navigator.geolocation.clearWatch(data.watchId);\r\n          data.watchId = null;\r\n        }\r\n\r\n        switch (error.code) {\r\n          case error.PERMISSION_DENIED:\r\n            data.getNearbyNote = \"Request for Geolocation is denied.\";\r\n            break;\r\n          case error.POSITION_UNAVAILABLE:\r\n            data.getNearbyNote = \"Location information is unavailable.\";\r\n            break;\r\n          case error.TIMEOUT:\r\n            data.getNearbyNote = \"Request to get location timed out.\";\r\n            break;\r\n          default:\r\n            // case error.UNKNOWN_ERROR:\r\n            data.getNearbyNote = \"An unknown error occurred.\";\r\n            break;\r\n        }\r\n      }\r\n    );\r\n  }\r\n}\r\n</script>\r\n","import script from \"./BusArrival.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BusArrival.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"sourceRoot":""}