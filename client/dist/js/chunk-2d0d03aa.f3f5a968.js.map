{"version":3,"sources":["webpack:///./src/components/EmailManage.vue","webpack:///./src/components/EmailManage.vue?0c2c","webpack:///./src/components/EmailGroupManage.vue","webpack:///./src/components/EmailGroupManage.vue?8000","webpack:///./src/views/EmailManagement.vue","webpack:///./src/views/EmailManagement.vue?043e"],"names":["data","reactive","curEmail","groups","showingInputs","allEmails","showingEmails","disableSubmit","msg","showInputs","axios","get","then","resp","console","log","showEmails","catch","e","addEmail","email","group","checked","push","post","err","setTimeout","deleteEmail","emailObj","delete","__exports__","emails","addEmailGroup","length","item","getEmails","document","title","onBeforeMount","loginId","router"],"mappings":"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","file":"js/chunk-2d0d03aa.f3f5a968.js","sourcesContent":["<template>\r\n  <div class=\"mt-3\" name=\"emails\">\r\n    <!-- for add email -->\r\n    <div>\r\n      <button\r\n        v-if=\"!data.showingInputs\"\r\n        class=\"btn btn-primary\"\r\n        @click=\"showInputs()\"\r\n      >\r\n        New Email\r\n      </button>\r\n      <button\r\n        v-if=\"!data.showingEmails\"\r\n        class=\"btn btn-primary mx-1\"\r\n        @click=\"showEmails()\"\r\n      >\r\n        View Emails\r\n      </button>\r\n    </div>\r\n\r\n    <div v-if=\"data.showingInputs\" class=\"mt-2\">\r\n      <div class=\"form row\">\r\n        <div class=\"form-floating col-3\">\r\n          <input\r\n            class=\"form-control\"\r\n            placeholder=\"email\"\r\n            v-model.trim=\"data.curEmail.email\"\r\n            required\r\n          />\r\n          <label for=\"floatingInput\" class=\"small\">Email</label>\r\n        </div>\r\n        <div class=\"form-floating col-3\">\r\n          <input\r\n            class=\"form-control\"\r\n            placeholder=\"name\"\r\n            v-model.trim=\"data.curEmail.name\"\r\n          />\r\n          <label for=\"floatingInput\" class=\"small\">Name</label>\r\n        </div>\r\n        <div class=\"form-floating col-3\">\r\n          <input\r\n            class=\"form-control\"\r\n            placeholder=\"company\"\r\n            v-model.trim=\"data.curEmail.company\"\r\n          />\r\n          <label for=\"floatingInput\" class=\"small\">Company</label>\r\n        </div>\r\n        <div class=\"form-floating col-3\">\r\n          <input\r\n            class=\"form-control\"\r\n            placeholder=\"team\"\r\n            v-model.trim=\"data.curEmail.team\"\r\n          />\r\n          <label for=\"floatingInput\" class=\"small\">Team</label>\r\n        </div>\r\n\r\n        <div class=\"mt-2\">\r\n          <label class=\"me-2\">Add to groups:</label>\r\n          <div\r\n            v-for=\"group in data.groups\"\r\n            class=\"form-check form-check-inline\"\r\n            :key=\"group.group\"\r\n          >\r\n            <input\r\n              class=\"form-check-input\"\r\n              v-model=\"group.checked\"\r\n              type=\"checkbox\"\r\n              value=\"\"\r\n            />\r\n            <label class=\"form-check-label\">{{ group.group }}</label>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"text-center mt-2\">\r\n          <div v-if=\"data.msg\" class=\"my-2\">\r\n            <label class=\"bg-info px-1\">{{ data.msg }}</label>\r\n          </div>\r\n          <button\r\n            class=\"btn btn-primary\"\r\n            @click=\"addEmail()\"\r\n            :disabled=\"data.disableSubmit\"\r\n          >\r\n            Create\r\n          </button>\r\n          <button\r\n            class=\"btn btn-success mx-1\"\r\n            @click=\"data.showingInputs = false\"\r\n          >\r\n            Cancel\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- view emails -->\r\n    <div v-if=\"data.showingEmails\" class=\"mt-2\">\r\n      <table class=\"table caption-top\">\r\n        <thead class=\"text-center\">\r\n          <tr>\r\n            <th>#</th>\r\n            <th>Email</th>\r\n            <th>Name</th>\r\n            <th>Team</th>\r\n            <th>Ops</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody class=\"text-center\">\r\n          <tr v-for=\"(email, ind) in data.allEmails\" :key=\"ind\">\r\n            <td>{{ ind + 1 }}</td>\r\n            <td>{{ email.email }}</td>\r\n            <td>{{ email.name }}</td>\r\n            <td>{{ email.team }}</td>\r\n            <td>\r\n              <button class=\"btn btn-small\">Edit</button>\r\n              <button\r\n                class=\"btn btn-small mx-1\"\r\n                @click=\"deleteEmail(email)\"\r\n                :disabled=\"data.disableSubmit\"\r\n              >\r\n                Delete\r\n              </button>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n\r\n      <div class=\"text-center\">\r\n        <div v-if=\"data.msg\" class=\"my-2\">\r\n          <label class=\"bg-info px-1\">{{ data.msg }}</label>\r\n        </div>\r\n        <button\r\n          class=\"btn btn-success mx-1\"\r\n          @click=\"data.showingEmails = false\"\r\n        >\r\n          Close\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport axios from \"axios\";\r\nimport { reactive } from \"vue\";\r\n\r\n// let emit = defineEmits([\"edit\"]);\r\n\r\nlet data = reactive({\r\n  curEmail: {},\r\n  groups: [],\r\n  showingInputs: false,\r\n  allEmails: [],\r\n  showingEmails: false,\r\n  disableSubmit: false,\r\n  msg: \"\",\r\n});\r\n\r\nfunction showInputs() {\r\n  axios.get(\"/api/msi/emails/groups\").then((resp) => {\r\n    data.groups = resp.data;\r\n    console.log(resp.groups);\r\n    data.showingInputs = true;\r\n    data.showingEmails = false;\r\n  });\r\n}\r\n\r\nfunction showEmails() {\r\n  axios\r\n    .get(\"/api/msi/emails\")\r\n    .then((resp) => {\r\n      data.allEmails = resp.data;\r\n      data.showingInputs = false;\r\n      data.showingEmails = true;\r\n    })\r\n    .catch((e) => {\r\n      console.log(\"showEmails:\", e);\r\n    });\r\n}\r\n\r\nfunction addEmail() {\r\n  console.log(data.curEmail);\r\n  if (!data.curEmail.email) {\r\n    data.msg = \"Please input email.\";\r\n    return;\r\n  }\r\n\r\n  data.curEmail.groups = [];\r\n  for (let group of data.groups) {\r\n    // console.log(\"group before submit:\", group);\r\n    if (group.checked) {\r\n      data.curEmail.groups.push(group.group);\r\n    }\r\n  }\r\n\r\n  console.log(\"add email: \", data.curEmail);\r\n  data.disableSubmit = true;\r\n  axios\r\n    .post(\"/api/msi/emails\", data.curEmail)\r\n    .then((resp) => {\r\n      console.log(resp);\r\n      if (resp.data.err) {\r\n        data.msg = resp.data.err;\r\n        data.disableSubmit = false;\r\n        return;\r\n      }\r\n\r\n      data.msg = \"Successful.\";\r\n      setTimeout(() => {\r\n        data.disableSubmit = false;\r\n        data.showingInputs = false;\r\n      }, 2000);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n      data.msg = err.msg;\r\n      data.disableSubmit = false;\r\n    });\r\n}\r\n\r\nfunction deleteEmail(emailObj) {\r\n  data.disableSubmit = true;\r\n  axios\r\n    .delete(\"/api/msi/emails/\" + emailObj.email)\r\n    .then((resp) => {\r\n      console.log(resp);\r\n      if (resp.data.err) {\r\n        data.msg = resp.data.err;\r\n        data.disableSubmit = false;\r\n        return;\r\n      }\r\n\r\n      data.msg = \"Successful.\";\r\n      showEmails();\r\n      setTimeout(() => {\r\n        data.disableSubmit = false;\r\n        // data.showingEmails = false;\r\n        data.msg = \"\";\r\n      }, 2000);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n      data.msg = err.msg;\r\n      data.disableSubmit = false;\r\n    });\r\n}\r\n</script>\r\n","import script from \"./EmailManage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./EmailManage.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div class=\"mt-3\" name=\"emails\">\r\n    <button\r\n      v-if=\"!data.showGroupInputs\"\r\n      class=\"btn btn-primary\"\r\n      @click=\"data.showGroupInputs = !data.showGroupInputs\"\r\n    >\r\n      New Email Group\r\n    </button>\r\n    <div v-if=\"data.showGroupInputs\" class=\"mt-2\">\r\n      <div class=\"form\">\r\n        <div class=\"form-floating\">\r\n          <input\r\n            class=\"form-control col-auto\"\r\n            placeholder=\"group name\"\r\n            v-model.trim=\"data.group.group\"\r\n            required\r\n          />\r\n          <label for=\"floatingInput\" class=\"small\">Group name</label>\r\n        </div>\r\n\r\n        <table class=\"table caption-top\">\r\n          <thead class=\"text-center\">\r\n            <tr>\r\n              <td>#</td>\r\n              <td>Email</td>\r\n              <td>Name</td>\r\n              <td>Team</td>\r\n              <td>Include</td>\r\n            </tr>\r\n          </thead>\r\n          <tbody class=\"text-center\">\r\n            <tr v-for=\"(email, ind) in data.allEmails\" :key=\"email.email\">\r\n              <td>{{ ind + 1 }}</td>\r\n              <td>{{ email.email }}</td>\r\n              <td>{{ email.name }}</td>\r\n              <td>{{ email.team }}</td>\r\n              <td class=\"\">\r\n                <div class=\"form-check\">\r\n                  <input\r\n                    class=\"form-check-input\"\r\n                    type=\"checkbox\"\r\n                    v-model=\"email.checked\"\r\n                    value=\"\"\r\n                  />\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n\r\n        <div class=\"text-center mt-2\">\r\n          <button class=\"btn btn-primary\" @click=\"addEmailGroup()\">\r\n            Create\r\n          </button>\r\n          <button\r\n            class=\"btn btn-success mx-1\"\r\n            @click=\"data.showGroupInputs = !data.showGroupInputs\"\r\n          >\r\n            Cancel\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport axios from \"axios\";\r\nimport { reactive } from \"vue\";\r\n\r\n// let emit = defineEmits([\"edit\"]);\r\n\r\nlet data = reactive({\r\n  disableSubmit: false,\r\n  group: {\r\n    group: null,\r\n    emails: [],\r\n  },\r\n  msg: null,\r\n  allEmails: [],\r\n});\r\n// console.log(\"yc1:\", data.group1);\r\n\r\n// watch(props.activity, () => {\r\n//   console.log(\"props.activity in watch\", props.activity);\r\n//   initData();\r\n// });\r\n\r\nfunction addEmailGroup() {\r\n  // console.log(\"in Submit:\", data.curActivity);\r\n  if (!data.group.group) {\r\n    data.msg = \"Please input group name.\";\r\n    return;\r\n  }\r\n\r\n  data.msg = \"\";\r\n\r\n  data.group.emails.length = 0;\r\n  for (let item of data.allEmails) {\r\n    console.log(\"data.allEmails before submit\", item.email, item.checked);\r\n    if (item.checked) {\r\n      data.group.emails.push(item.email);\r\n    }\r\n  }\r\n  console.log(\"submit group:\", data.group);\r\n\r\n  data.disableSubmit = true;\r\n  axios\r\n    .post(\"/api/msi/emails/group\", data.group)\r\n    .then((resp) => {\r\n      console.log(resp.data);\r\n    })\r\n    .catch((e) => {\r\n      console.log(e);\r\n    });\r\n}\r\n\r\nfunction getEmails() {\r\n  axios.get(\"/api/msi/emails\").then((resp) => {\r\n    console.log(resp.data);\r\n    data.allEmails.length = 0;\r\n    data.allEmails = resp.data;\r\n  });\r\n}\r\ngetEmails();\r\n</script>\r\n","import script from \"./EmailGroupManage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./EmailGroupManage.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <msi-navbar></msi-navbar>\r\n\r\n  <div class=\"container\">\r\n    <h4 class=\"my-4\">Email Address Management</h4>\r\n\r\n    <email-manage></email-manage>\r\n\r\n    <hr class=\"border-1 my-3\" />\r\n\r\n    <email-group-manage></email-group-manage>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onBeforeMount } from \"vue\";\r\n\r\nimport msiNavbar from \"../components/MsiNavbar.vue\";\r\nimport EmailManage from \"../components/EmailManage.vue\";\r\nimport EmailGroupManage from \"../components/EmailGroupManage.vue\";\r\n\r\nimport { loginId } from \"../common/msiLogin\";\r\nimport router from \"../router\";\r\n\r\ndocument.title = \"Email Management\";\r\n\r\n// let data = reactive({\r\n//   curEmail: {},\r\n//   groups: [],\r\n//   email: [],\r\n//   showEmailInputs: false,\r\n//   msg: \"\",\r\n// });\r\n\r\nonBeforeMount(() => {\r\n  if (!loginId()) {\r\n    router.push(\"/login\");\r\n    return;\r\n  }\r\n});\r\n</script>\r\n","import script from \"./EmailManagement.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./EmailManagement.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"sourceRoot":""}