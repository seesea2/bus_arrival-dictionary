{"version":3,"sources":["webpack:///./node_modules/core-js/internals/string-repeat.js","webpack:///./node_modules/core-js/internals/this-number-value.js","webpack:///./src/views/BusArrivalTime.vue","webpack:///./src/views/BusArrivalTime.vue?b4da","webpack:///./node_modules/core-js/modules/es.number.to-fixed.js"],"names":["global","toIntegerOrInfinity","toString","requireObjectCoercible","RangeError","module","exports","count","str","this","result","n","Infinity","uncurryThis","valueOf","document","title","data","reactive","inputCode","busArrival","busStop","loading","loadingNote","bookmark","refresh","axios","get","then","resp","catch","err","response","message","getLoadColour","bus","Load","calculateArrivalTime","EstimatedArrival","date","Date","now","diffMinutes","toFixed","addBookmark","add","onBeforeMount","route","useRoute","params","__exports__","$","thisNumberValue","$repeat","fails","String","floor","Math","repeat","stringSlice","slice","un$ToFixed","pow","x","acc","log","x2","multiply","c","index","c2","divide","dataToString","s","t","length","FORCED","target","proto","forced","fractionDigits","e","z","j","k","number","fractDigits","sign"],"mappings":"gHACA,IAAIA,EAAS,EAAQ,QACjBC,EAAsB,EAAQ,QAC9BC,EAAW,EAAQ,QACnBC,EAAyB,EAAQ,QAEjCC,EAAaJ,EAAOI,WAIxBC,EAAOC,QAAU,SAAgBC,GAC/B,IAAIC,EAAMN,EAASC,EAAuBM,OACtCC,EAAS,GACTC,EAAIV,EAAoBM,GAC5B,GAAII,EAAI,GAAKA,GAAKC,IAAU,MAAMR,EAAW,+BAC7C,KAAMO,EAAI,GAAIA,KAAO,KAAOH,GAAOA,GAAc,EAAJG,IAAOD,GAAUF,GAC9D,OAAOE,I,uBChBT,IAAIG,EAAc,EAAQ,QAI1BR,EAAOC,QAAUO,EAAY,GAAIC,U,60CCmFjCC,SAASC,MAAQ,cACjB,IAAIC,EAAOC,sBAAS,CAClBC,UAAW,KACXC,WAAY,KACZC,QAAS,KACTC,QAAS,KACTC,YAAa,KACbC,SAAU,OASZ,SAASC,IACPR,EAAKK,SAAU,EACfL,EAAKM,YAAc,GACnBG,IACGC,IAAI,2BAA6BV,EAAKE,WACtCS,MAAK,SAACC,GACLZ,EAAKI,QAAUQ,EAAKZ,KAAKI,QACzBJ,EAAKG,WAAaS,EAAKZ,KAAKG,WAE5BH,EAAKO,SAAWG,eAAIV,EAAKE,cAE1BW,OAAM,SAACC,GACFA,EAAIC,UAAYD,EAAIC,SAASf,MAAQc,EAAIC,SAASf,KAAKgB,QACzDhB,EAAKM,YAAcQ,EAAIC,SAASf,KAAKgB,QAGvChB,EAAKM,YAAcQ,KAEpBH,MAAK,WACJX,EAAKK,SAAU,KAIrB,SAASY,EAAcC,GACrB,GAAKA,GAAmB,OAAZA,EAAIC,KAET,MAAgB,OAAZD,EAAIC,KACN,UACc,OAAZD,EAAIC,KACN,kBADF,EAKT,SAASC,EAAqBF,GAC5B,IAAKA,IAAQA,EAAIG,iBACf,MAAO,KAGT,IAAMC,EAAO,IAAIC,KAAKL,EAAIG,kBAC1B,GAAIC,EAAKzB,UAAY0B,KAAKC,MAAQ,EAChC,MAAO,UAET,IAAMC,GAAeH,EAAKzB,UAAY0B,KAAKC,OAAS,IAAO,GAC3D,OAAIC,EAAc,EACT,QAEAA,EAAYC,QAAQ,GAAK,QAGpC,SAASC,IAEHC,eAAI5B,EAAKI,WACXJ,EAAKO,SAAWG,eAAIV,EAAKE,Y,OA1D7B2B,4BAAc,WACZ,IAAMC,EAAQC,iBACd/B,EAAKE,UAAY4B,EAAME,OAAO9B,UAC9BM,O,uoFCjGF,MAAMyB,EAAc,EAEL,gB,kCCJf,IAAIC,EAAI,EAAQ,QACZnD,EAAS,EAAQ,QACjBa,EAAc,EAAQ,QACtBZ,EAAsB,EAAQ,QAC9BmD,EAAkB,EAAQ,QAC1BC,EAAU,EAAQ,QAClBC,EAAQ,EAAQ,QAEhBlD,EAAaJ,EAAOI,WACpBmD,EAASvD,EAAOuD,OAChBC,EAAQC,KAAKD,MACbE,EAAS7C,EAAYwC,GACrBM,EAAc9C,EAAY,GAAG+C,OAC7BC,EAAahD,EAAY,GAAI8B,SAE7BmB,EAAM,SAAUC,EAAGpD,EAAGqD,GACxB,OAAa,IAANrD,EAAUqD,EAAMrD,EAAI,IAAM,EAAImD,EAAIC,EAAGpD,EAAI,EAAGqD,EAAMD,GAAKD,EAAIC,EAAIA,EAAGpD,EAAI,EAAGqD,IAG9EC,EAAM,SAAUF,GAClB,IAAIpD,EAAI,EACJuD,EAAKH,EACT,MAAOG,GAAM,KACXvD,GAAK,GACLuD,GAAM,KAER,MAAOA,GAAM,EACXvD,GAAK,EACLuD,GAAM,EACN,OAAOvD,GAGPwD,EAAW,SAAUlD,EAAMN,EAAGyD,GAChC,IAAIC,GAAS,EACTC,EAAKF,EACT,QAASC,EAAQ,EACfC,GAAM3D,EAAIM,EAAKoD,GACfpD,EAAKoD,GAASC,EAAK,IACnBA,EAAKd,EAAMc,EAAK,MAIhBC,EAAS,SAAUtD,EAAMN,GAC3B,IAAI0D,EAAQ,EACRD,EAAI,EACR,QAASC,GAAS,EAChBD,GAAKnD,EAAKoD,GACVpD,EAAKoD,GAASb,EAAMY,EAAIzD,GACxByD,EAAKA,EAAIzD,EAAK,KAId6D,EAAe,SAAUvD,GAC3B,IAAIoD,EAAQ,EACRI,EAAI,GACR,QAASJ,GAAS,EAChB,GAAU,KAANI,GAAsB,IAAVJ,GAA+B,IAAhBpD,EAAKoD,GAAc,CAChD,IAAIK,EAAInB,EAAOtC,EAAKoD,IACpBI,EAAU,KAANA,EAAWC,EAAID,EAAIf,EAAO,IAAK,EAAIgB,EAAEC,QAAUD,EAErD,OAAOD,GAGPG,EAAStB,GAAM,WACjB,MAAkC,UAA3BO,EAAW,KAAS,IACF,MAAvBA,EAAW,GAAK,IACS,SAAzBA,EAAW,MAAO,IACuB,wBAAzCA,EAAW,kBAAuB,QAC/BP,GAAM,WAEXO,EAAW,OAKbV,EAAE,CAAE0B,OAAQ,SAAUC,OAAO,EAAMC,OAAQH,GAAU,CACnDjC,QAAS,SAAiBqC,GACxB,IAKIC,EAAGC,EAAGC,EAAGC,EALTC,EAASjC,EAAgB3C,MACzB6E,EAAcrF,EAAoB+E,GAClC/D,EAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GACvBsE,EAAO,GACP7E,EAAS,IAIb,GAAI4E,EAAc,GAAKA,EAAc,GAAI,MAAMlF,EAAW,6BAE1D,GAAIiF,GAAUA,EAAQ,MAAO,MAC7B,GAAIA,IAAW,MAAQA,GAAU,KAAM,OAAO9B,EAAO8B,GAKrD,GAJIA,EAAS,IACXE,EAAO,IACPF,GAAUA,GAERA,EAAS,MAKX,GAJAJ,EAAIhB,EAAIoB,EAASvB,EAAI,EAAG,GAAI,IAAM,GAClCoB,EAAID,EAAI,EAAII,EAASvB,EAAI,GAAImB,EAAG,GAAKI,EAASvB,EAAI,EAAGmB,EAAG,GACxDC,GAAK,iBACLD,EAAI,GAAKA,EACLA,EAAI,EAAG,CACTd,EAASlD,EAAM,EAAGiE,GAClBC,EAAIG,EACJ,MAAOH,GAAK,EACVhB,EAASlD,EAAM,IAAK,GACpBkE,GAAK,EAEPhB,EAASlD,EAAM6C,EAAI,GAAIqB,EAAG,GAAI,GAC9BA,EAAIF,EAAI,EACR,MAAOE,GAAK,GACVZ,EAAOtD,EAAM,GAAK,IAClBkE,GAAK,GAEPZ,EAAOtD,EAAM,GAAKkE,GAClBhB,EAASlD,EAAM,EAAG,GAClBsD,EAAOtD,EAAM,GACbP,EAAS8D,EAAavD,QAEtBkD,EAASlD,EAAM,EAAGiE,GAClBf,EAASlD,EAAM,IAAMgE,EAAG,GACxBvE,EAAS8D,EAAavD,GAAQyC,EAAO,IAAK4B,GAU5C,OAPEA,EAAc,GAChBF,EAAI1E,EAAOiE,OACXjE,EAAS6E,GAAQH,GAAKE,EAClB,KAAO5B,EAAO,IAAK4B,EAAcF,GAAK1E,EACtCiD,EAAYjD,EAAQ,EAAG0E,EAAIE,GAAe,IAAM3B,EAAYjD,EAAQ0E,EAAIE,KAE5E5E,EAAS6E,EAAO7E,EACTA","file":"js/chunk-7e148a16.9366c151.js","sourcesContent":["'use strict';\nvar global = require('../internals/global');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toString = require('../internals/to-string');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar RangeError = global.RangeError;\n\n// `String.prototype.repeat` method implementation\n// https://tc39.es/ecma262/#sec-string.prototype.repeat\nmodule.exports = function repeat(count) {\n  var str = toString(requireObjectCoercible(this));\n  var result = '';\n  var n = toIntegerOrInfinity(count);\n  if (n < 0 || n == Infinity) throw RangeError('Wrong number of repetitions');\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) result += str;\n  return result;\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\n// `thisNumberValue` abstract operation\n// https://tc39.es/ecma262/#sec-thisnumbervalue\nmodule.exports = uncurryThis(1.0.valueOf);\n","<template>\r\n  <div class=\"container text-center py-3\">\r\n    <div>\r\n      <h3 v-if=\"data.busStop\">{{ data.busStop.Description }}</h3>\r\n      <h5>Bus Stop: {{ data.inputCode }}</h5>\r\n\r\n      <div v-if=\"data.loading\" class=\"my-3\">\r\n        <div\r\n          class=\"spinner-border\"\r\n          style=\"width: 10rem; height: 10rem\"\r\n          role=\"status\"\r\n        >\r\n          <span class=\"sr-only\">Loading...</span>\r\n        </div>\r\n      </div>\r\n      <div v-else-if=\"data.loadingNote\">{{ data.loadingNote }}</div>\r\n    </div>\r\n\r\n    <table v-if=\"data.busArrival\" class=\"table mt-3\">\r\n      <thead class=\"thead-dark\">\r\n        <tr>\r\n          <th scope=\"col\">#</th>\r\n          <th scope=\"col\">1st Bus</th>\r\n          <th scope=\"col\">2nd Bus</th>\r\n          <th scope=\"col\">3rd Bus</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody v-if=\"data.busArrival.Services.length\">\r\n        <tr\r\n          v-for=\"service in data.busArrival.Services\"\r\n          :key=\"service.ServiceNo\"\r\n        >\r\n          <th scope=\"row\">{{ service.ServiceNo }}</th>\r\n          <td :class=\"getLoadColour(service.NextBus)\">\r\n            {{ calculateArrivalTime(service.NextBus) }}\r\n          </td>\r\n          <td :class=\"getLoadColour(service.NextBus2)\">\r\n            {{ calculateArrivalTime(service.NextBus2) }}\r\n          </td>\r\n          <td :class=\"getLoadColour(service.NextBus2)\">\r\n            {{ calculateArrivalTime(service.NextBus3) }}\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n      <tbody v-else>\r\n        <tr>\r\n          <td v-for=\"ind in 4\" :key=\"ind\">NA</td>\r\n        </tr>\r\n      </tbody>\r\n      <caption>\r\n        <ul class=\"small\">\r\n          <li>\r\n            <label>Seats Available</label>\r\n          </li>\r\n          <li>\r\n            <label class=\"bg-info\">Standing Available</label>\r\n          </li>\r\n          <li>\r\n            <label class=\"bg-warning\">Limited Standing</label>\r\n          </li>\r\n        </ul>\r\n      </caption>\r\n    </table>\r\n\r\n    <div class=\"btn-group mt-3\">\r\n      <button v-if=\"!data.loadingNote\" @click=\"refresh\" class=\"btn btn-primary\">\r\n        Refresh\r\n      </button>\r\n      <button\r\n        v-if=\"!data.loadingNote && !data.bookmark\"\r\n        @click=\"addBookmark\"\r\n        class=\"btn btn-primary\"\r\n      >\r\n        BookmarkBusStop\r\n      </button>\r\n      <button class=\"btn btn-primary\" @click=\"$router.go(-1)\">Back</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport axios from \"axios\";\r\nimport { onBeforeMount, reactive } from \"vue\";\r\nimport { useRoute } from \"vue-router\";\r\n\r\nimport { get, add } from \"../common/busBookmarks.js\";\r\n\r\ndocument.title = \"Bus Arrival\";\r\nlet data = reactive({\r\n  inputCode: null,\r\n  busArrival: null,\r\n  busStop: null,\r\n  loading: null,\r\n  loadingNote: null,\r\n  bookmark: null,\r\n});\r\n\r\nonBeforeMount(() => {\r\n  const route = useRoute();\r\n  data.inputCode = route.params.inputCode;\r\n  refresh();\r\n});\r\n\r\nfunction refresh() {\r\n  data.loading = true;\r\n  data.loadingNote = \"\";\r\n  axios\r\n    .get(\"/api/lta/bus/busArrival/\" + data.inputCode)\r\n    .then((resp) => {\r\n      data.busStop = resp.data.busStop;\r\n      data.busArrival = resp.data.busArrival;\r\n\r\n      data.bookmark = get(data.inputCode);\r\n    })\r\n    .catch((err) => {\r\n      if (err.response && err.response.data && err.response.data.message) {\r\n        data.loadingNote = err.response.data.message;\r\n        return;\r\n      }\r\n      data.loadingNote = err;\r\n    })\r\n    .then(() => {\r\n      data.loading = false;\r\n    });\r\n}\r\n\r\nfunction getLoadColour(bus) {\r\n  if (!bus || bus.Load == \"SEA\") {\r\n    return;\r\n  } else if (bus.Load == \"SDA\") {\r\n    return \"bg-info\";\r\n  } else if (bus.Load == \"LSD\") {\r\n    return \"bg-warning\";\r\n  }\r\n  return;\r\n}\r\nfunction calculateArrivalTime(bus) {\r\n  if (!bus || !bus.EstimatedArrival) {\r\n    return \"NA\";\r\n  }\r\n\r\n  const date = new Date(bus.EstimatedArrival);\r\n  if (date.valueOf() - Date.now() < 0) {\r\n    return \"Arrived\";\r\n  }\r\n  const diffMinutes = (date.valueOf() - Date.now()) / 1000 / 60;\r\n  if (diffMinutes < 1) {\r\n    return \"1 min\";\r\n  } else {\r\n    return diffMinutes.toFixed(0) + \" mins\";\r\n  }\r\n}\r\nfunction addBookmark() {\r\n  // console.log(\"to add\", this.busStop);\r\n  if (add(data.busStop)) {\r\n    data.bookmark = get(data.inputCode);\r\n    // console.log(\"this.bookmark after add\", this.bookmark);\r\n  }\r\n}\r\n</script>\r\n","import script from \"./BusArrivalTime.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BusArrivalTime.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar thisNumberValue = require('../internals/this-number-value');\nvar $repeat = require('../internals/string-repeat');\nvar fails = require('../internals/fails');\n\nvar RangeError = global.RangeError;\nvar String = global.String;\nvar floor = Math.floor;\nvar repeat = uncurryThis($repeat);\nvar stringSlice = uncurryThis(''.slice);\nvar un$ToFixed = uncurryThis(1.0.toFixed);\n\nvar pow = function (x, n, acc) {\n  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);\n};\n\nvar log = function (x) {\n  var n = 0;\n  var x2 = x;\n  while (x2 >= 4096) {\n    n += 12;\n    x2 /= 4096;\n  }\n  while (x2 >= 2) {\n    n += 1;\n    x2 /= 2;\n  } return n;\n};\n\nvar multiply = function (data, n, c) {\n  var index = -1;\n  var c2 = c;\n  while (++index < 6) {\n    c2 += n * data[index];\n    data[index] = c2 % 1e7;\n    c2 = floor(c2 / 1e7);\n  }\n};\n\nvar divide = function (data, n) {\n  var index = 6;\n  var c = 0;\n  while (--index >= 0) {\n    c += data[index];\n    data[index] = floor(c / n);\n    c = (c % n) * 1e7;\n  }\n};\n\nvar dataToString = function (data) {\n  var index = 6;\n  var s = '';\n  while (--index >= 0) {\n    if (s !== '' || index === 0 || data[index] !== 0) {\n      var t = String(data[index]);\n      s = s === '' ? t : s + repeat('0', 7 - t.length) + t;\n    }\n  } return s;\n};\n\nvar FORCED = fails(function () {\n  return un$ToFixed(0.00008, 3) !== '0.000' ||\n    un$ToFixed(0.9, 0) !== '1' ||\n    un$ToFixed(1.255, 2) !== '1.25' ||\n    un$ToFixed(1000000000000000128.0, 0) !== '1000000000000000128';\n}) || !fails(function () {\n  // V8 ~ Android 4.3-\n  un$ToFixed({});\n});\n\n// `Number.prototype.toFixed` method\n// https://tc39.es/ecma262/#sec-number.prototype.tofixed\n$({ target: 'Number', proto: true, forced: FORCED }, {\n  toFixed: function toFixed(fractionDigits) {\n    var number = thisNumberValue(this);\n    var fractDigits = toIntegerOrInfinity(fractionDigits);\n    var data = [0, 0, 0, 0, 0, 0];\n    var sign = '';\n    var result = '0';\n    var e, z, j, k;\n\n    // TODO: ES2018 increased the maximum number of fraction digits to 100, need to improve the implementation\n    if (fractDigits < 0 || fractDigits > 20) throw RangeError('Incorrect fraction digits');\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (number != number) return 'NaN';\n    if (number <= -1e21 || number >= 1e21) return String(number);\n    if (number < 0) {\n      sign = '-';\n      number = -number;\n    }\n    if (number > 1e-21) {\n      e = log(number * pow(2, 69, 1)) - 69;\n      z = e < 0 ? number * pow(2, -e, 1) : number / pow(2, e, 1);\n      z *= 0x10000000000000;\n      e = 52 - e;\n      if (e > 0) {\n        multiply(data, 0, z);\n        j = fractDigits;\n        while (j >= 7) {\n          multiply(data, 1e7, 0);\n          j -= 7;\n        }\n        multiply(data, pow(10, j, 1), 0);\n        j = e - 1;\n        while (j >= 23) {\n          divide(data, 1 << 23);\n          j -= 23;\n        }\n        divide(data, 1 << j);\n        multiply(data, 1, 1);\n        divide(data, 2);\n        result = dataToString(data);\n      } else {\n        multiply(data, 0, z);\n        multiply(data, 1 << -e, 0);\n        result = dataToString(data) + repeat('0', fractDigits);\n      }\n    }\n    if (fractDigits > 0) {\n      k = result.length;\n      result = sign + (k <= fractDigits\n        ? '0.' + repeat('0', fractDigits - k) + result\n        : stringSlice(result, 0, k - fractDigits) + '.' + stringSlice(result, k - fractDigits));\n    } else {\n      result = sign + result;\n    } return result;\n  }\n});\n"],"sourceRoot":""}