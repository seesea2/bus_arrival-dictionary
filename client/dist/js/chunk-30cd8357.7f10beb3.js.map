{"version":3,"sources":["webpack:///./node_modules/core-js/internals/string-repeat.js","webpack:///./node_modules/core-js/internals/this-number-value.js","webpack:///./src/views/BusArrivalTime.vue","webpack:///./src/views/BusArrivalTime.vue?2e4a","webpack:///./node_modules/core-js/modules/es.number.to-fixed.js"],"names":["toInteger","toString","requireObjectCoercible","module","exports","count","str","this","result","n","Infinity","RangeError","valueOf","value","call","class","style","role","scope","busStop","Description","inputCode","loading","loadingNote","busArrival","Services","length","service","key","ServiceNo","getLoadColour","NextBus","calculateArrivalTime","NextBus2","NextBus3","ind","refresh","bookmark","addBookmark","$router","go","name","data","created","route","params","methods","a","get","then","resp","catch","err","response","message","bus","Load","EstimatedArrival","date","Date","now","diffMinutes","toFixed","console","log","render","$","thisNumberValue","repeat","fails","nativeToFixed","floor","Math","pow","x","acc","x2","multiply","c","index","c2","divide","dataToString","s","t","String","FORCED","target","proto","forced","fractionDigits","e","z","j","k","number","fractDigits","sign","slice"],"mappings":"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","file":"js/chunk-30cd8357.7f10beb3.js","sourcesContent":["'use strict';\nvar toInteger = require('../internals/to-integer');\nvar toString = require('../internals/to-string');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `String.prototype.repeat` method implementation\n// https://tc39.es/ecma262/#sec-string.prototype.repeat\nmodule.exports = function repeat(count) {\n  var str = toString(requireObjectCoercible(this));\n  var result = '';\n  var n = toInteger(count);\n  if (n < 0 || n == Infinity) throw RangeError('Wrong number of repetitions');\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) result += str;\n  return result;\n};\n","var valueOf = 1.0.valueOf;\n\n// `thisNumberValue` abstract operation\n// https://tc39.es/ecma262/#sec-thisnumbervalue\nmodule.exports = function (value) {\n  return valueOf.call(value);\n};\n","<template>\r\n  <div class=\"container text-center py-3\">\r\n    <div>\r\n      <h3 v-if=\"busStop\">{{ busStop.Description }}</h3>\r\n      <h5>Bus Stop: {{ inputCode }}</h5>\r\n\r\n      <div v-if=\"loading\" class=\"my-3\">\r\n        <div\r\n          class=\"spinner-border\"\r\n          style=\"width: 10rem; height: 10rem\"\r\n          role=\"status\"\r\n        >\r\n          <span class=\"sr-only\">Loading...</span>\r\n        </div>\r\n      </div>\r\n      <div v-else-if=\"loadingNote\">{{ loadingNote }}</div>\r\n    </div>\r\n\r\n    <table v-if=\"busArrival\" class=\"table mt-3\">\r\n      <thead class=\"thead-dark\">\r\n        <tr>\r\n          <th scope=\"col\">#</th>\r\n          <th scope=\"col\">1st Bus</th>\r\n          <th scope=\"col\">2nd Bus</th>\r\n          <th scope=\"col\">3rd Bus</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody v-if=\"busArrival.Services.length\">\r\n        <tr v-for=\"service in busArrival.Services\" :key=\"service.ServiceNo\">\r\n          <th scope=\"row\">{{ service.ServiceNo }}</th>\r\n          <td :class=\"getLoadColour(service.NextBus)\">\r\n            {{ calculateArrivalTime(service.NextBus) }}\r\n          </td>\r\n          <td :class=\"getLoadColour(service.NextBus2)\">\r\n            {{ calculateArrivalTime(service.NextBus2) }}\r\n          </td>\r\n          <td :class=\"getLoadColour(service.NextBus2)\">\r\n            {{ calculateArrivalTime(service.NextBus3) }}\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n      <tbody v-else>\r\n        <tr>\r\n          <td v-for=\"ind in 4\" :key=\"ind\">NA</td>\r\n        </tr>\r\n      </tbody>\r\n      <caption>\r\n        <ul class=\"small\">\r\n          <li><label>Seats Available</label></li>\r\n          <li><label class=\"bg-info\">Standing Available</label></li>\r\n          <li><label class=\"bg-warning\">Limited Standing</label></li>\r\n        </ul>\r\n      </caption>\r\n    </table>\r\n\r\n    <div class=\"btn-group mt-3\">\r\n      <button v-if=\"!loadingNote\" @click=\"refresh\" class=\"btn btn-primary\">\r\n        Refresh\r\n      </button>\r\n      <button\r\n        v-if=\"!loadingNote && !bookmark\"\r\n        @click=\"addBookmark\"\r\n        class=\"btn btn-primary\"\r\n      >\r\n        BookmarkBusStop\r\n      </button>\r\n      <button class=\"btn btn-primary\" @click=\"this.$router.go(-1)\">Back</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { get, add } from \"../common/busBookmarks.js\";\r\n\r\nexport default {\r\n  name: \"BusArrivalTime\",\r\n  data() {\r\n    return {\r\n      inputCode: null,\r\n      busArrival: null,\r\n      busStop: null,\r\n      loading: null,\r\n      loadingNote: null,\r\n      bookmark: null,\r\n    };\r\n  },\r\n  created() {\r\n    const route = useRoute();\r\n    this.inputCode = route.params.inputCode;\r\n    this.refresh();\r\n  },\r\n\r\n  methods: {\r\n    refresh() {\r\n      this.loading = true;\r\n      this.loadingNote = \"\";\r\n      axios\r\n        .get(\"/api/lta/bus/busArrival/\" + this.inputCode)\r\n        .then((resp) => {\r\n          this.busStop = resp.data.busStop;\r\n          this.busArrival = resp.data.busArrival;\r\n\r\n          this.bookmark = get(this.inputCode);\r\n        })\r\n        .catch((err) => {\r\n          if (err.response && err.response.data && err.response.data.message) {\r\n            this.loadingNote = err.response.data.message;\r\n            return;\r\n          }\r\n          this.loadingNote = err;\r\n        })\r\n        .then(() => {\r\n          this.loading = false;\r\n        });\r\n    },\r\n    getLoadColour(bus) {\r\n      if (!bus || bus.Load == \"SEA\") {\r\n        return;\r\n      } else if (bus.Load == \"SDA\") {\r\n        return \"bg-info\";\r\n      } else if (bus.Load == \"LSD\") {\r\n        return \"bg-warning\";\r\n      }\r\n      return;\r\n    },\r\n    calculateArrivalTime(bus) {\r\n      if (!bus || !bus.EstimatedArrival) {\r\n        return \"NA\";\r\n      }\r\n\r\n      const date = new Date(bus.EstimatedArrival);\r\n      if (date.valueOf() - Date.now() < 0) {\r\n        return \"Arrived\";\r\n      }\r\n      const diffMinutes = (date.valueOf() - Date.now()) / 1000 / 60;\r\n      if (diffMinutes < 1) {\r\n        return \"1 min\";\r\n      } else {\r\n        return diffMinutes.toFixed(0) + \" mins\";\r\n      }\r\n    },\r\n    addBookmark() {\r\n      console.log(\"to add\", this.busStop);\r\n      if (add(this.busStop)) {\r\n        this.bookmark = get(this.inputCode);\r\n        console.log(\"this.bookmark after add\", this.bookmark);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped></style>\r\n","import { render } from \"./BusArrivalTime.vue?vue&type=template&id=0863ffe4\"\nimport script from \"./BusArrivalTime.vue?vue&type=script&lang=js\"\nexport * from \"./BusArrivalTime.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","'use strict';\nvar $ = require('../internals/export');\nvar toInteger = require('../internals/to-integer');\nvar thisNumberValue = require('../internals/this-number-value');\nvar repeat = require('../internals/string-repeat');\nvar fails = require('../internals/fails');\n\nvar nativeToFixed = 1.0.toFixed;\nvar floor = Math.floor;\n\nvar pow = function (x, n, acc) {\n  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);\n};\n\nvar log = function (x) {\n  var n = 0;\n  var x2 = x;\n  while (x2 >= 4096) {\n    n += 12;\n    x2 /= 4096;\n  }\n  while (x2 >= 2) {\n    n += 1;\n    x2 /= 2;\n  } return n;\n};\n\nvar multiply = function (data, n, c) {\n  var index = -1;\n  var c2 = c;\n  while (++index < 6) {\n    c2 += n * data[index];\n    data[index] = c2 % 1e7;\n    c2 = floor(c2 / 1e7);\n  }\n};\n\nvar divide = function (data, n) {\n  var index = 6;\n  var c = 0;\n  while (--index >= 0) {\n    c += data[index];\n    data[index] = floor(c / n);\n    c = (c % n) * 1e7;\n  }\n};\n\nvar dataToString = function (data) {\n  var index = 6;\n  var s = '';\n  while (--index >= 0) {\n    if (s !== '' || index === 0 || data[index] !== 0) {\n      var t = String(data[index]);\n      s = s === '' ? t : s + repeat.call('0', 7 - t.length) + t;\n    }\n  } return s;\n};\n\nvar FORCED = nativeToFixed && (\n  0.00008.toFixed(3) !== '0.000' ||\n  0.9.toFixed(0) !== '1' ||\n  1.255.toFixed(2) !== '1.25' ||\n  1000000000000000128.0.toFixed(0) !== '1000000000000000128'\n) || !fails(function () {\n  // V8 ~ Android 4.3-\n  nativeToFixed.call({});\n});\n\n// `Number.prototype.toFixed` method\n// https://tc39.es/ecma262/#sec-number.prototype.tofixed\n$({ target: 'Number', proto: true, forced: FORCED }, {\n  toFixed: function toFixed(fractionDigits) {\n    var number = thisNumberValue(this);\n    var fractDigits = toInteger(fractionDigits);\n    var data = [0, 0, 0, 0, 0, 0];\n    var sign = '';\n    var result = '0';\n    var e, z, j, k;\n\n    if (fractDigits < 0 || fractDigits > 20) throw RangeError('Incorrect fraction digits');\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (number != number) return 'NaN';\n    if (number <= -1e21 || number >= 1e21) return String(number);\n    if (number < 0) {\n      sign = '-';\n      number = -number;\n    }\n    if (number > 1e-21) {\n      e = log(number * pow(2, 69, 1)) - 69;\n      z = e < 0 ? number * pow(2, -e, 1) : number / pow(2, e, 1);\n      z *= 0x10000000000000;\n      e = 52 - e;\n      if (e > 0) {\n        multiply(data, 0, z);\n        j = fractDigits;\n        while (j >= 7) {\n          multiply(data, 1e7, 0);\n          j -= 7;\n        }\n        multiply(data, pow(10, j, 1), 0);\n        j = e - 1;\n        while (j >= 23) {\n          divide(data, 1 << 23);\n          j -= 23;\n        }\n        divide(data, 1 << j);\n        multiply(data, 1, 1);\n        divide(data, 2);\n        result = dataToString(data);\n      } else {\n        multiply(data, 0, z);\n        multiply(data, 1 << -e, 0);\n        result = dataToString(data) + repeat.call('0', fractDigits);\n      }\n    }\n    if (fractDigits > 0) {\n      k = result.length;\n      result = sign + (k <= fractDigits\n        ? '0.' + repeat.call('0', fractDigits - k) + result\n        : result.slice(0, k - fractDigits) + '.' + result.slice(k - fractDigits));\n    } else {\n      result = sign + result;\n    } return result;\n  }\n});\n"],"sourceRoot":""}