(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d210faf"],{b9ce:function(t,e,c){"use strict";c.r(e);c("ac1f"),c("5319");var i=c("7a23"),a={class:"container mt-5"},n={key:0,class:"row"},s=["onClick"],l={class:"card-header"},r={class:"card-body"},o={class:"card-text small"},u=Object(i["f"])("b",null,"Start",-1),b={class:"card-text small"},d=Object(i["f"])("b",null,"End",-1),f={class:"card-text small"},O=Object(i["f"])("b",null,"Affected Systems",-1),j={class:"modal fade",id:"activityDetailsModalToggle","aria-hidden":"true","aria-labelledby":"activityDetailsModalToggleLabel",tabindex:"-1"},m={class:"modal-dialog modal-lg modal-dialog-centered"},v={key:0,class:"modal-content"},g={class:"modal-header"},y={class:"modal-title",id:"activityDetailsModalToggleLabel"},h={key:0,class:"modal-body"},p={class:"card-text small"},D=Object(i["f"])("b",null,"Start:",-1),A={class:"card-text small"},M=Object(i["f"])("b",null,"End:",-1),S={class:"card-text mt-1 small"},w=Object(i["f"])("b",null,"Affected Systems:",-1),k=Object(i["f"])("hr",null,null,-1),T={class:"card-text mt-1 small"},x=Object(i["f"])("b",null,"Impact:",-1),H=["innerHTML"],L={class:"card-text mt-1 small"},V=Object(i["f"])("b",null,"NoImpact:",-1),C=["innerHTML"],I=Object(i["f"])("hr",null,null,-1),G={class:"card-text mt-1 small"},U=Object(i["f"])("b",null,"Remarks:",-1),E=["innerHTML"],P={class:"card-text mt-1 small"},N=Object(i["f"])("b",null,"Contact Persons:",-1),R=["innerHTML"],J={class:"modal-footer"},Z={class:"modal fade",id:"editActivityModalToggle","data-bs-backdrop":"static","aria-hidden":"true","aria-labelledby":"editActivityModalToggleLabel",tabindex:"-1"},q={class:"modal-dialog modal-fullscreen modal-dialog-centered"},z={class:"modal-content"},B={class:"modal-header"},F={key:0,class:"modal-title",id:"editActivityModalToggleLabel"},K={key:1,class:"modal-title",id:"editActivityModalToggleLabel"},Q={key:0,class:"modal-body"},W={class:"form-group mt-5"},X={class:"row"},Y={class:"col"},$=Object(i["f"])("label",null,"Title:",-1),_={class:"col"},tt=Object(i["f"])("label",null,"Affected Systems:",-1),et={class:"row"},ct={class:"col"},it=Object(i["f"])("label",null,"Start Datetime:",-1),at={class:"form-control"},nt=Object(i["g"])(" : "),st={class:"col"},lt=Object(i["f"])("label",null,"End Datetime:",-1),rt={class:"form-control"},ot=["value"],ut=Object(i["g"])(" : "),bt=["value"],dt={class:"col"},ft=Object(i["f"])("label",null,"Contact Persons:",-1),Ot={class:"row"},jt={class:"col"},mt=Object(i["f"])("label",null,"Impact:",-1),vt={class:"col"},gt=Object(i["f"])("label",null,"No Impact:",-1),yt={class:"col"},ht=Object(i["f"])("label",null,"Remarks:",-1),pt={key:0,class:"text-center"},Dt={class:"bg-warning"},At={class:"modal-footer"},Mt=Object(i["f"])("hr",{class:"border-1 my-3"},null,-1),St={class:"text-center"};function wt(t,e,c,wt,kt,Tt){var xt=Object(i["y"])("MsiNavbarVue");return Object(i["r"])(),Object(i["e"])("div",null,[Object(i["h"])(xt),Object(i["f"])("div",a,[kt.activities.length?(Object(i["r"])(),Object(i["e"])("div",n,[(Object(i["r"])(!0),Object(i["e"])(i["a"],null,Object(i["x"])(kt.activities,(function(t){return Object(i["r"])(),Object(i["e"])("div",{class:"col-sm-12 col-md-3 my-1",key:t.id},[Object(i["f"])("div",{class:"card",role:"button",onClick:function(e){return Tt.ViewDetails(t,"activityDetailsModalToggle")}},[Object(i["f"])("div",l,Object(i["A"])(t.title),1),Object(i["f"])("div",r,[Object(i["f"])("div",o,[u,Object(i["g"])(": "+Object(i["A"])(new Date(t.startDatetime).toLocaleString()),1)]),Object(i["f"])("div",b,[d,Object(i["g"])(": "+Object(i["A"])(new Date(t.endDatetime).toLocaleString()),1)]),Object(i["f"])("p",f,[O,Object(i["g"])(" : "+Object(i["A"])(t.affectedSystems),1)])])],8,s)])})),128))])):Object(i["d"])("",!0),Object(i["f"])("div",j,[Object(i["f"])("div",m,[kt.curActivity.id?(Object(i["r"])(),Object(i["e"])("div",v,[Object(i["f"])("div",g,[Object(i["f"])("h5",y,Object(i["A"])(kt.curActivity.title),1),Object(i["f"])("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:e[0]||(e[0]=function(t){return Tt.toggleModal()})})]),kt.curActivity?(Object(i["r"])(),Object(i["e"])("div",h,[Object(i["f"])("div",p,[D,Object(i["g"])(" "+Object(i["A"])(new Date(kt.curActivity.startDatetime).toLocaleString()),1)]),Object(i["f"])("div",A,[M,Object(i["g"])(" "+Object(i["A"])(new Date(kt.curActivity.endDatetime).toLocaleString()),1)]),Object(i["f"])("div",S,[w,Object(i["g"])(" "+Object(i["A"])(kt.curActivity.affectedSystems),1)]),k,Object(i["f"])("div",T,[x,kt.curActivity.impact?(Object(i["r"])(),Object(i["e"])("div",{key:0,innerHTML:kt.curActivity.impact.replace(/\r\n/g,"<br>").replace(/\n/g,"<br>"),class:"mx-3"},null,8,H)):Object(i["d"])("",!0)]),Object(i["f"])("div",L,[V,kt.curActivity.noImpact?(Object(i["r"])(),Object(i["e"])("div",{key:0,innerHTML:kt.curActivity.noImpact.replace(/\r\n/g,"<br>").replace(/\n/g,"<br>"),class:"mx-3"},null,8,C)):Object(i["d"])("",!0)]),I,Object(i["f"])("div",G,[U,kt.curActivity.remarks?(Object(i["r"])(),Object(i["e"])("div",{key:0,innerHTML:kt.curActivity.remarks.replace(/\r\n/g,"<br>").replace(/\n/g,"<br>"),class:"mx-3"},null,8,E)):Object(i["d"])("",!0)]),Object(i["f"])("div",P,[N,Object(i["f"])("span",{innerHTML:kt.curActivity.contactPersons},null,8,R)])])):Object(i["d"])("",!0),Object(i["f"])("div",J,[Object(i["f"])("button",{class:"btn btn-primary btn-sm",onClick:e[1]||(e[1]=function(t){return Tt.toggleModal("editActivityModalToggle")})}," Edit ")])])):Object(i["d"])("",!0)])]),Object(i["f"])("div",Z,[Object(i["f"])("div",q,[Object(i["f"])("div",z,[Object(i["f"])("div",B,[kt.curActivity&&kt.curActivity.id?(Object(i["r"])(),Object(i["e"])("h5",F," Edit Activity ")):(Object(i["r"])(),Object(i["e"])("h5",K," Add Activity ")),Object(i["f"])("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:e[2]||(e[2]=function(t){return Tt.toggleModal()})})]),kt.curActivity?(Object(i["r"])(),Object(i["e"])("div",Q,[Object(i["f"])("div",W,[Object(i["f"])("div",X,[Object(i["f"])("div",Y,[$,Object(i["G"])(Object(i["f"])("input",{class:"form-control","onUpdate:modelValue":e[3]||(e[3]=function(t){return kt.curActivity.title=t})},null,512),[[i["D"],kt.curActivity.title]])]),Object(i["f"])("div",_,[tt,Object(i["G"])(Object(i["f"])("input",{class:"form-control","onUpdate:modelValue":e[4]||(e[4]=function(t){return kt.curActivity.affectedSystems=t})},null,512),[[i["D"],kt.curActivity.affectedSystems]])])]),Object(i["f"])("div",et,[Object(i["f"])("div",ct,[it,Object(i["f"])("div",at,[Object(i["G"])(Object(i["f"])("input",{type:"date",class:"border-0","onUpdate:modelValue":e[5]||(e[5]=function(t){return kt.startDateStr=t})},null,512),[[i["D"],kt.startDateStr]]),Object(i["G"])(Object(i["f"])("select",{class:"ms-4 border-0 bg-white","onUpdate:modelValue":e[6]||(e[6]=function(t){return kt.startHour=t})},[(Object(i["r"])(!0),Object(i["e"])(i["a"],null,Object(i["x"])(kt.hours,(function(t){return Object(i["r"])(),Object(i["e"])("option",{key:t},Object(i["A"])(t),1)})),128))],512),[[i["C"],kt.startHour]]),nt,Object(i["G"])(Object(i["f"])("select",{class:"border-0 bg-white","onUpdate:modelValue":e[7]||(e[7]=function(t){return kt.startMinute=t})},[(Object(i["r"])(!0),Object(i["e"])(i["a"],null,Object(i["x"])(kt.minutes,(function(t){return Object(i["r"])(),Object(i["e"])("option",{key:t},Object(i["A"])(t),1)})),128))],512),[[i["C"],kt.startMinute]])])]),Object(i["f"])("div",st,[lt,Object(i["f"])("div",rt,[Object(i["G"])(Object(i["f"])("input",{type:"date",class:"border-0","onUpdate:modelValue":e[8]||(e[8]=function(t){return kt.endDateStr=t})},null,512),[[i["D"],kt.endDateStr]]),Object(i["G"])(Object(i["f"])("select",{class:"ms-4 border-0 bg-white","onUpdate:modelValue":e[9]||(e[9]=function(t){return kt.endHour=t})},[(Object(i["r"])(!0),Object(i["e"])(i["a"],null,Object(i["x"])(kt.hours,(function(t){return Object(i["r"])(),Object(i["e"])("option",{value:t,key:t},Object(i["A"])(t),9,ot)})),128))],512),[[i["C"],kt.endHour]]),ut,Object(i["G"])(Object(i["f"])("select",{class:"border-0 bg-white","onUpdate:modelValue":e[10]||(e[10]=function(t){return kt.endMinute=t})},[(Object(i["r"])(!0),Object(i["e"])(i["a"],null,Object(i["x"])(kt.minutes,(function(t){return Object(i["r"])(),Object(i["e"])("option",{value:t,key:t},Object(i["A"])(t),9,bt)})),128))],512),[[i["C"],kt.endMinute]])])]),Object(i["f"])("div",dt,[ft,Object(i["G"])(Object(i["f"])("input",{class:"form-control","onUpdate:modelValue":e[11]||(e[11]=function(t){return kt.curActivity.contactPersons=t})},null,512),[[i["D"],kt.curActivity.contactPersons]])])]),Object(i["f"])("div",Ot,[Object(i["f"])("div",jt,[mt,Object(i["G"])(Object(i["f"])("textarea",{class:"form-control","onUpdate:modelValue":e[12]||(e[12]=function(t){return kt.curActivity.impact=t})},null,512),[[i["D"],kt.curActivity.impact]])]),Object(i["f"])("div",vt,[gt,Object(i["G"])(Object(i["f"])("textarea",{class:"form-control","onUpdate:modelValue":e[13]||(e[13]=function(t){return kt.curActivity.noImpact=t})},null,512),[[i["D"],kt.curActivity.noImpact]])]),Object(i["f"])("div",yt,[ht,Object(i["G"])(Object(i["f"])("textarea",{class:"form-control","onUpdate:modelValue":e[14]||(e[14]=function(t){return kt.curActivity.remarks=t})},null,512),[[i["D"],kt.curActivity.remarks]])])])]),kt.submitMsg?(Object(i["r"])(),Object(i["e"])("div",pt,[Object(i["f"])("small",Dt,Object(i["A"])(kt.submitMsg),1)])):Object(i["d"])("",!0)])):Object(i["d"])("",!0),Object(i["f"])("div",At,[Object(i["f"])("button",{class:"btn btn-primary",onClick:e[15]||(e[15]=function(t){return Tt.Submit()})},"Submit")])])])])]),Mt,Object(i["f"])("div",St,[Object(i["f"])("button",{class:"btn btn-primary",onClick:e[16]||(e[16]=function(t){return Tt.initData()||Tt.toggleModal("editActivityModalToggle")})}," Add ")])])}c("1276"),c("d3b7"),c("25f0"),c("4de4"),c("4d90");var kt=c("bc3a"),Tt=c.n(kt),xt=c("5da5"),Ht=c("a9d6"),Lt=c("243f"),Vt=c("a18c");function Ct(t){return new Date(t.toISOString().split("Z")[0]+"-08:00").toISOString()}var It={name:"ActivitiesVue",components:{MsiNavbarVue:xt["a"]},data:function(){return{activities:[],curActivity:{title:new String,affectedSystems:new String,impact:new String,noImpact:new String,remarks:new String,contactPersons:new String},startDateStr:Ct(new Date).split("T")[0],startHour:"00",startMinute:"00",endHour:"00",endMinute:"00",endDateStr:Ct(new Date).split("T")[0],hours:[],minutes:[],submitMsg:""}},created:function(){Object(Ht["c"])()||Vt["a"].push("/login")},mounted:function(){document.title="Activities",this.Refresh();for(var t=0;t<24;++t)t<10?this.hours.push("0"+t):this.hours.push(t.toString());this.minutes.push("00"),this.minutes.push("15"),this.minutes.push("30"),this.minutes.push("45")},methods:{dateToLocaleStr:function(t){return Ct(t)},initData:function(){console.log("initData()"),this.curActivity={title:"",affectedSystems:"",impact:"",noImpact:"",remarks:"",contactPersons:""},this.startDateStr=Ct(new Date).split("T")[0],this.startHour="00",this.startMinute="00",this.endDateStr=Ct(new Date).split("T")[0],this.endHour="00",this.endMinute="00"},Refresh:function(t){var e=this;t?"Day"==t&&(console.log("filter",t),this.activities=this.orgActivities,this.activities.filter((function(t){return t.startDate||t.endDate?new Date(t.startDate)>(new Date).setDate((new Date).getDate()+1)?(console.log("filter 2"),!1):new Date(t.endDate)<(new Date).setDate((new Date).getDate()-1)?(console.log("filter 3"),!1):(console.log("filter end"),!0):(console.log("filter 1"),!1)}))):Tt.a.get("/api/msi/activities").then((function(t){e.activities=t.data})).catch((function(t){console.log(t),e.activities=[]}))},Submit:function(){var t=this;if(console.log("in Submit:",this.curActivity),this.curActivity.title){this.submitMsg="";var e=new Date(this.startDateStr);e.setHours(parseInt(this.startHour)),e.setMinutes(parseInt(this.startMinute)),this.curActivity.startDatetime=e;var c=new Date(this.endDateStr);c.setHours(parseInt(this.endHour)),c.setMinutes(parseInt(this.endMinute)),this.curActivity.endDatetime=c,console.log("in 2:",this.curActivity),this.curActivity.id?Tt.a.put("/api/msi/activities",this.curActivity).then((function(){t.submitMsg="Edit successfully.",setTimeout((function(){t.submitMsg="",Object(Lt["a"])()}),3e3);for(var e=0;e<t.activities.length;++e)if(t.activities[e].id==t.curActivity.id){for(var c in t.activities[e])t.activities[e][c]=t.curActivity[c];break}return!0})).catch((function(e){t.submitMsg=e,console.log("put err:",e)})):Tt.a.post("/api/msi/activities",this.curActivity).then((function(e){t.curActivity.id=e.data.id,t.activities.push(t.curActivity),t.submitMsg="Add successfully.",setTimeout((function(){t.submitMsg="",Object(Lt["a"])()}),3e3)})).catch((function(e){t.submitMsg=e,console.log("post err:",e)}))}else this.submitMsg="Title is empty."},Delete:function(t){console.log("delete act:",t),t&&(this.activities=this.activities.filter((function(e){return e.id!=t})),Tt.a.delete("/api/msi/activities/"+t).catch((function(t){console.log(t)})))},ViewDetails:function(t,e){for(var c in this.startDateStr=Ct(new Date(t.startDatetime)).split("T")[0],this.startHour=new Date(t.startDatetime).getHours().toString().padStart(2,"0"),this.startMinute=new Date(t.startDatetime).getMinutes().toString().padStart(2,"0"),this.endDateStr=Ct(new Date(t.endDatetime)).split("T")[0],this.endHour=new Date(t.endDatetime).getHours().toString().padStart(2,"0"),this.endMinute=new Date(t.endDatetime).getMinutes().toString().padStart(2,"0"),console.log("handleEventClick:",this.startDateStr,this.startHour,this.startMinute),t)this.curActivity[c]=t[c];return this.toggleModal(e),!0},toggleModal:function(t){return Object(Lt["a"])(t)}}};It.render=wt;e["default"]=It}}]);
//# sourceMappingURL=chunk-2d210faf.5e75bd37.js.map